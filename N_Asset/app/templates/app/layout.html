<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
 <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-control" content="no-cache">
    <meta name="description" content="{{CompanyName|default_if_none:'Nufarm'}} Asset Management, {{CompanyName|default_if_none:'Nufarm'}} Asset internal for management only" />
    <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
    <![endif]-->
    <title>{{ title|default_if_none:"N Asset" }} - {{CompanyName|default_if_none:"Nufarm"}} </title>
    {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static 'app/content/bootstrap.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app/content/menu.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app/content/MainLayouts.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app/content/site.css' %}" />
    <link rel="shortcut icon" type="image/png" href="{% static 'app/images/fave.png %" />
    <script src="{% static 'app/scripts/modernizr-2.6.2.js' %}"></script>
    <script src="{% static 'app/scripts/NA_Bootstrap.js' %}"></script>
    <script src="{% static 'app/scripts/renderjson.js' %}"></script>
    <script src="{% static 'app/scripts/domJSON.js' %}"></script>
    <style>
        div.tree-node span.fa-plus, div.tree-node span.fa-pencil {
            position: relative;
            bottom: 1px;
        }

        div.tree-node span.fa-trash, div.tree-node span.fa-envelope {
            position: relative;
            bottom: 2px;
        }

        div#EventLogs li, div#EventLogs ul {
            min-width: 100%;
            width: -moz-fit-content;
        }

        .ui-jqgrid .ui-pg-table .ui-pg-input {
            height: 16px;
            width: 30px;
            line-height: inherit;
            padding: 1px;
            font-weight: normal;
            font-size: 11px;
            margin: 1px;
            border: 1px solid #0b9910;
            text-align: center;
        }
        div.sidebar ul li a:not([data-toggle="collapse"]) {
			white-space:nowrap
		}
    </style>
</head>
<body>
    <header>
        <a href="#"><img src="{% static 'app/images/NufarmLogo.jpg' %}" alt="Insert Logo Here" width="173" height="90" id="Insert_logo" style="background-color:transparent; display:block;" /></a>
    </header>
    <div style="height: 85.5%;position: relative;">
        <div class="fltlft">
            {% with request.resolver_match.url_name as url_name %} <!-- for getting url path, if the url path is Employee, only give class active to it .. . :D -->
            <div class="sidebar" id="NASideBar">
                <div id="sidebarresult">
                    <ul class="list-sidebar bg-defoult" id="ulsidebar">
                        <!--<li class="nav-header "> <span> <img alt="image" class="img-circle" src="http://placehold.it/150x150"> </span>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu4">
                                        <li><a href="#">Regular link</a></li>
                                        <li class="disabled"><a href="#">Disabled link</a></li>
                                        <li><a href="#">Another link</a></li>
                                    </ul> -->
                        <li>
                            <a href="#" data-toggle="collapse" data-target="#autoHideMenu" class="active collapsed"
                                aria-expanded="false" style="position:relative;display:block;height:25px;"> <span
                                    class="fa fa-angle-left pull-right"></span> </a>
                        </li>
                        <li>
                            <a href="#" data-toggle="collapse" data-target="#dashboard"
                                class="active{% if not request.user.role == 3 %} collapsed{% endif %}" aria-expanded="false">
                                <i class="fa fa-address-card" aria-hidden="true"></i>
                                <span class="nav-label"> Master Data </span> <span
                                    class="fa{% if not request.user.role == 3 %} fa-angle-down{% else %} fa-angle-up{% endif %} pull-right"></span>
                            </a>
                            <ul class="sub-menu{% if not request.user.role == 3 %} collapse{% else %} in{% endif %}" id="dashboard"
                                aria-expanded="false" style="">
                                {% if request.user.allow_view_supplier %}
                                <li><a href="{% url 'MasterData:NA_Supplier:NA_Supplier' %}" {% if url_name == 'NA_Supplier' %}
                                        class="active" {% endif %}><i class="fa fa-address-book-o" aria-hidden="true"></i>Supplier</a>
                                </li>
                                {% endif %}

                                {% if request.user.allow_view_employee %}
                                <li><a href="{% url 'MasterData:NA_Employee:NA_Employee' %}" {% if url_name == 'NA_Employee' %}
                                        class="active" {% endif %}><i class="fa fa-address-card" aria-hidden="true"></i> Employee</a>
                                </li>
                                {% endif %}

                                {% if request.user.allow_view_goods %}
                                <li><a href="{% url 'MasterData:NA_Goods:GoodMaster' %}"><i class="fa fa-dropbox"
                                            aria-hidden="true"></i>Goods</a></li>
                                {% endif %}
                                <li id="emailData"><a href="#"><i class="fa fa-envelope"></i>Email Data</a></li>
                                {% if request.user.allow_view_privilege %}
                                <li><a href="{% url 'MasterData:NA_Privilege:NA_Privilege' %}" {% if url_name == 'NA_Privilege' %}
                                        class="active" {% endif %}><i class="fa fa-user"></i> User Privilege</a></li>
                                {% endif %}
                                <li><a href="#">Others Menu</a></li>
                                <li><a href="#">Others Menu</a></li>
                                <li><a href="#">Others Menu</a></li>
                                <li><a href="#">Others Menu</a></li>
                            </ul>
                        </li>

                        {% if request.user.role != 3 %} {# 3 = Guest : Hide menu transaction from User Guest #}
                        <li>
                            <a href="#" data-toggle="collapse" data-target="#products" class="active collapsed" aria-expanded="false">
                                <i class="fa fa-exchange"></i> <span class="nav-label">Transactions</span> <span
                                    class="fa fa-angle-down pull-right"></span>
                            </a>
                            <ul class="sub-menu collapse" id="products" aria-expanded="false">
                                <li>
                                    <a href="#" data-toggle="collapse" data-target="#it" class="active collapsed" aria-expanded="false">
                                        <i class="fa fa-laptop"></i><span class="nav-label">IT</span>
                                        <span class="fa fa-angle-down pull-right"></span>
                                    </a>
                                </li>
                                <li>
                                    <ul class="sub-menu collapse" id="it" aria-expanded="false" style="">
                                        <li class="active">
                                            <a href="{% url 'Transactions:NA_Goods_Receive:GoodsReceive' %}">Goods Receive</a>
                                            <ul class="sub-menu" id="GRDetails" aria-expanded="false">
                                                <li><a href="{% url 'Transactions:NA_Goods_Receive_Detail:entrybatchdetail' %}"
                                                        style="padding-left:18px;font-size:0.9em;">Entry Batch Detail</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Outwards:GoodsOutwards' %}">Goods Outwords</a></li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Lending:GoodsLending' %}"
                                                {% if url_name == 'GoodsLending' %} class="active" {% endif %}>Goods Lending</a></li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Return:GoodsReturn' %}">Goods Returned</a></li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Lost:NA_GoodsLost' %}"
                                                {% if url_name == 'NA_GoodsLost' %} class="active" {% endif %}>Goods Lost</a></li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Disposal:GoodsDisposal' %}"
                                                {% if url_name == 'GoodsDisposal' %} class="active" {% endif %}>Asset Deletion</a></li>
                                        <li class="active"><a
                                                href="{% url 'Transactions:NA_Goods_Receive_other:NA_Goods_Receive_other' %}">Accessories</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#" data-toggle="collapse" data-target="#ga" class="active collapsed" aria-expanded="false">
                                        <i class="fa fa-archive"></i><span class="nav-label">GA</span>
                                        <span class="fa fa-angle-down pull-right"></span>
                                    </a>
                                </li>
                                <li>
                                    <ul class="sub-menu collapse" id="ga" aria-expanded="false">
                                        <li><a id="extend_tax_menu" href="#">Extend taxes</a></li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Receive_GA:GoodsReceive' %}">Goods Receive</a></li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Outwards_GA:GoodsOutwards' %}">Goods Outwords</a>
                                        </li>
                                        <li><a href="#">Goods Returned</a></li>
                                        <li><a href="{% url 'Transactions:NA_Goods_Lost:NA_GoodsLost' %}"
                                                {% if url_name == 'NA_GoodsLost' %} class="active" {% endif %}>Goods Lost</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="#" data-toggle="collapse" data-target="#reports" class="active collapsed" aria-expanded="false">
                                <i class="fa  fa-bar-chart" aria-hidden="true"></i>
                                <span class="nav-label"> Reports </span> <span class="fa fa-angle-down pull-right"></span>
                            </a>
                        </li>
                        <li>
                            <ul class="sub-menu collapse" id="reports" aria-expanded="false">
                                <li><a href="{% url 'Report:ReportByRecipient:Report_ByRecipient' %}">By Recipient</span></a></li>
                                <li><a href="{% url 'Report:ReportByRefNumber:Report_ByRefNumber' %}">By Ref Number</span></a></li>
                            </ul>
                        </li>
                        <li> <a href="{% url 'OtherPages:NA_Acc_FA:NA_Acc' %}"><i class="fa fa-sort-amount-asc" aria-hidden="true"></i>
                                <span class="nav-label">Asset Depreciation</span></a> </li>
                        <li> <a href="{% url 'OtherPages:NA_Maintenance:NA_Maintenance' %}"><i class="fa fa-wrench"
                                    aria-hidden="true"></i><span class="nav-label">Maintenance</span></a> </li>
                        <li> <a href="{% url 'Transactions:NA_Goods_Disposal:GoodsDisposal' %}" {% if url_name == 'NA_GoodsLost' %}
                                class="active" {% endif %}><i class="fa fa-trash" aria-hidden="true"></i> <span
                                    class="nav-label">Disposal</span></a> </li>
                        <li> <a href="#"><i class="fa fa-files-o"></i> <span class="nav-label">Other Pages</span></a> </li>
                        {% endif %}
                    </ul>
                </div>

            </div>
            {% endwith %}
            <div class="content">
                <div class="nfAction">
                    <div class="row">
                        <div class="col-xs-12">
                            <nav class="navbar navbar-default" role="navigation">
                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" style="display:flex;flex-flow:nowrap;position:relative">
                                    <ul class="nav navbar-nav" style="flex:0 1 auto ;display: flex;flex-flow: row nowrap">
                                        {% block ActionMenu %}
                                        <li class="active"><button class="btn-sm" id="addData"><i class="fa fa-plus">  Add</i></button></li>
                                        <li><button class="btn-sm"><i class="fa fa-envelope-open">  Open</i></button></li>
                                        <li><button class="btn-sm" id="editData"><i class="fa fa-pencil-square">  Edit</i></button></li>
                                        <li><button class="btn-sm"><i class="fa fa-floppy-o">  Save</i></button></li>
                                        <li><button class="btn-sm" id="delData"><i class="fa fa-window-close">  Delete</i></button></li>
                                        <li><button class="btn-sm"><i class="fa fa-file-excel-o">  Export</i></button></li>
                                        <li><button class="btn-sm"><i class="fa fa-print">  Print</i></button></li>
                                        <li><button class="btn-sm"><i class="fa fa-question-circle">  Help</i></button></li>
                                        {% endblock %}
                                    </ul>
                                    <div class="col-sm-8 col-md-4" style="display:flex;padding:0px;">
                                        <ul>
                                            <li class="dropdown" style="flex:0 1 65px">
                                                <a href="http://www.jquery2dotnet.com" class=" btn dropdown-toggle" data-toggle="dropdown" style="color:black;border-radius:0px;padding:4px 10px;" id="bySearch" value="By">By <b class="caret"></b></a>
                                                <ul class="dropdown-menu search" id="selectValue">
                                                    {%block SearchData %}

                                                    {% endblock %}
                                                </ul>
                                            </li>
                                        </ul>
                                        <!--<form class="navbar-form" role="search" style="flex: 11 1 450px;left:0;position:relative;">
                                             <div class="input-group" style="display:inline-flex;position:relative">
                                                 <input class="form-control" style="display:flex;flex-flow:row nowrap;height:30.22px;" placeholder="Enter text to search for" type="text" id="searchData" required="" name="q" />
                                                 <div class="input-group-btn" style="padding-bottom:0;display:flex;flex-flow:row nowrap;width:auto;">
                                                     <button style="height:30.22px;" class="btn btn-default" type="submit" id="submitSearch"><i class="fa fa-search-minus" aria-hidden="true"></i></button>
                                                 </div>
                                             </div>
                                        </form>-->
                                        <!--input-group-btn{padding-bottom: 2px}
                                        col-sm-5 col-md-4-->
                                        <form class="navbar-form" role="search" style="left:0;position:relative;margin:auto;flex:1 1 auto;">
                                            <div class="input-group" style="display:inline-flex;position:relative">
                                                <input class="NA-Form-Control" style="display:flex;flex-flow:row nowrap;height:30.22px;" placeholder="Enter text to search for" name="q" autocomplete="off" type="text">
                                                <div class="input-group-btn" style="padding-bottom:0;display:flex;flex-flow:row nowrap;width:auto;">
                                                    <button style="height:30.22px;" class="btn btn-default" type="submit"><i class="fa fa-search-minus" aria-hidden="true"></i></button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
                <div class="nfsitemap">
                    <a href="#" translate="yes" draggable="true" aria-controls="AslogArea AsmainArea" spellcheck="true"
                        class="active collapsed" aria-expanded="false" data-toggle="collapse" data-target=".collapse multi-collapse"
                        style="position:relative;display:block;height:25px;"><span translate="yes" draggable="false" spellcheck="true"
                            tabindex="-1" class="fa fa-angle-right pull-right"></span></a>
                </div>
                <div id="content-0">
                    <script>
                           function url_logEvent() {
                               return '{% url "OtherPages:NA_Log_Event:NA_LogEvent" %}'
                           };
                           function url_logDesc(){
                               return "{% url 'OtherPages:NA_Log_Event:NA_LogEvent_descriptions' %}";
                           };
                           function url_register(){
                               return "{% url 'NA_User_Register' %}";
                           };
                           function url_emailData(){
                               return "{% url 'OtherPages:NA_Email_Data:NA_EmailData' %}";
                           };
                           function url_searchBio(){
                               return "{% url 'OtherPages:NA_Email_Data:NA_EmailData_searchBiodata' %}";
                           };
                           function url_emailUpl(){
                               return "{% url 'OtherPages:NA_Email_Data:NA_EmailUplData' %}";
                           };
                           function url_retriveBio(){
                               return "{% url 'OtherPages:NA_Email_Data:NA_Email_retriveBio' %}";
                           };
                    </script>
                    <script>
                    	function reload_LogEvent() {
                    		setTimeout(function () {
                    			$.ajax({
                    				url: url_logEvent(),
                    				success: function (data) {
                    					$('#EventLogs').tree('loadData',JSON.parse(data));
                    				}
                    			})

                    		},3000)
                    	};
                    	function getValues_emailForm() {
                    		var data = {
                    			to: $.trim($('input#id_to').val()),
                    			subject: $.trim($('input#id_subject').val()),
                    			message: $.trim($('textarea').val())
                    		};

                    		return data
                    	}
                    </script>
                    <!---============================Application content resides here======================== -->
                    {% block javascriptAndUI %}
                    {% endblock %}

                    {%block content-0 %}
                    {% endblock %}

                </div>
                <!--<footer>
                    <p>Express anything here for the footer info</p>
                    <address>
                        Address Content
                    </address>
                </footer>-->
            </div>
        </div>
        <aside>
                            <div class="AsideLoginArea" id="AslogArea">
                                <ul class="nav navbar-nav navbar-right" style="display: flex;flex-flow: row nowrap;">
                                    <!--when user log in this must be replaced with user pic and when clicked will go directly to user account management-->
                                    {%block ImgUserLogin %}
                                    {% if request.user.is_authenticated %}
                        <li class="dropdown prevent-close notifications"
                            style="position: absolute;right: 20px;top: 8px;height:auto;padding-bottom:10px;padding-right: 60px;">
                            <div class="dropdown-toggle" data-toggle="dropdown" style="top:10px;width: 43px;height: 43px;/*! padding: 9px; */">
                                <div class="profile-circle shadow">
                                    <i class="fa fa-bell notifications-dropdown-icon" style="color: #fff;">
                                        <span id="notification-count" class="badge badge-success pull-right"></span>
                                    </i>
                                </div>
                            </div>
                            <ul class="dropdown-menu triangle triangle-bell-notif pull-right shadow"
                                style="min-width: 320px;min-height:370px;max-height:370px;padding:0px;border-radius:2px">
                                <li style="background: #f5f5f5;padding:10px;color:forestgreen;font-weight:bold;">
                                    Notifications <span id="notification-count" class="badge badge-success pull-right"></span>
                                </li>
                                <li class="divider" style="margin:0px;"></li>
                                <li>
                                    <ul id="notification-content" data-pull="false">
                                        <div style="color:#999;"><i class="fa fa-bell fa-4x"></i></div>
                                        <p class="no-notification">There's no notifications here</p>
                                    </ul>
                                </li>
                                <li class="divider" style="margin:0px;"></li>
                                <li class="see-all-notification">See all notifications</li>
                            </ul>
                        </li>
                        <li class="dropdown prevent-close" style="position: absolute;right: 20px;top: 8px;height:auto;padding-bottom:10px;">
                            <div class="dropdown-toggle" data-toggle="dropdown" style="top:10px">
                                <div class="profile-circle shadow"
                                    style="background-image:url({% if request.user.picture %}{% static 'NA_User_Image/UploadImg/' %}{{ request.user.get_picture_name }}{% else %}{% static 'NA_User_Image/Img/default.png' %}{% endif %})">
                                </div>
                            </div>
                            <ul class="dropdown-menu triangle triange-profile-dropdown pull-right shadow"
                                style="min-width: 320px;height:190px;padding:0px;border-radius:2px">
                                <li>
                                    <div class="row" style="margin:15px;height:110px;">
                                        <div class="col-md-5" style="padding:0px;">
                                            <div class="profile-circle medium"
                                                style="border:none-
                                                                                                                                                                                                                                                                                                                                                                                                                                        ;background-image:url({% if request.user.picture %}{% static 'NA_User_Image/UploadImg/' %}{{ request.user.get_picture_name }}{% else %}{% static 'NA_User_Image/Img/default.png' %}{% endif %})">
                                            </div>
                                            <form id="form_change_user_picture" enctype="multipart/form-data" method="post" action="">
                                                <input id="user_picture" type="file" style="display:none;" accept="image/*" />
                                                <input type="submit" style="display:none" />
                                            </form>
                                            <p class="profile-text-green" id="change_user_picture" style="text-align:center;width:105px">Change Picture</p>
                                            </div>
                                            <div class="col-md-7" style="font-size:13px;padding:5px;">
                                                <div class="username">{{ request.user.first_name }} {{ request.user.last_name }}</div>
                                                <div class="email">{{ request.user.email }}</div>
                                                <div>{{ request.user.divisi }} - <b>{{ request.user.get_role_display }}</b></div>
                                            <div>
                                                <p id="edit_profile" class="profile-text-green" style="padding:0;font-size:15px;">
                                                    Profile</p>
                                            </div>
                                            </div>
                                            </div>
                                            </li>
                                            <li class="divider" style="margin-bottom:0px;"></li>
                                            <li style="height:47px;background:#f5f5f5;">
                                                <!--<a class="btn btn-default pull-right" href="{% url 'logout' %}" style="margin-right:10px">Sign out</a>-->
                                    <button id="btn_sign_out" class="btn btn-default pull-right" style="margin:7px;padding:4px 10px;border-radius:3px;">Sign
                                        out</button>
                                    </li>
                                    </ul>
                                    </li>
                                    {% else %}
                                    <li style="background-color:transparent;margin-top:7px; display:inline-flex;flex :0 0 auto;top:10px; ">
                                        <i class="fa fa-user"></i>
                                    </li>
                                    {% endif %}
                                    {% endblock %}
                                    <!--When user has sign in this text must be changed with the name sign out and removed li control-->
                                    <!-- ============================ User Login =================================== -->
                                    {%if not request.user.is_authenticated%}
                                    <li class="dropdown prevent-close keep-open open" style="flex: 0 1 65px;">
                                        <a href="http://www.jquery2dotnet.com" class="dropdown-toggle" data-toggle="dropdown" style="top:10px">
                                            Sign in
                                            <b class="caret"></b>
                                        </a>
                                        <ul class="dropdown-menu" style="padding: 10px;min-width: 170px;">
                                            <li>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <form class="form" role="form" method="post" action="/login/" accept-charset="UTF-8" id="login-nav">
                                                            {% csrf_token %}
                                                            <div class="form-group">
                                                                <label class="sr-only" for="exampleInputEmail2">Email address</label>
                                                                <input class="form-control" name="email" id="id_email" required="" type="email"
                                                                    placeholder="Email address">
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="sr-only" for="exampleInputPassword2">Password</label>
                                                                <input class="form-control" name="password" id="id_password" required="" type="password"
                                                                    placeholder="Password">
                                                            </div>
                                                            <div class="checkbox">
                                                                <label>
                                                                    <input type="checkbox"> Remember me
                                                                </label>
                                                            </div>
                                    
                                                            <div class="form-group">
                                                                <button type="submit" class="btn btn-success btn-block">Sign in</button>
                                                            </div>
                                    
                                                        </form>
                                                        <div class="form-group">
                                                            <button class="btn btn-primary btn-block" id="register">Sign up</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="divider"></li>
                                            <li>
                                    <a href="{% url 'social:begin' 'facebook' %}" class="btn btn-primary btn-block">Login with
                                        Facebook</a>
                                    </li>
                                    </ul>
                                    </li>
                                    {% endif %}
                                    <!-- ============================ End User Login =============================== -->
                                    </ul>
                                    </div>
                                    <script>window.jQuery || document.write('<script src="../../static/app/scripts/jquery-1.11.1.js"><\/script>')</script>
                                    <script>
                                                    $(document).ready(function () {
                                                        $('form#login-nav').submit(function (event) {
                                                            event.preventDefault();
                                                        if (this.checkValidity()) {
                                                            event.stopPropagation();
                                                            event.stopImmediatePropagation();
                                                            $.ajax({
                                                                url: this.action,
                                                                method: 'POST',
                                                            beforeSend: function (xhr) {
                                                                xhr.setRequestHeader(
                                                                    'X-CSRFToken',
                                                                    $('input[name="csrfmiddlewaretoken"]').val()
                                                                )
                                                            },
                                                            data: {
                                                                email: $(this).find('input[type="email"]').val(),
                                                                password: $(this).find('input[type="password"]').val()
                                                            },
                                                            success: function (data) {
                                        // TODO: Handle it, in layout.html --> don't use tag session
                                                            setTimeout(function () {
                                                                window.location.href = data.redirect;
                                                            }, 500);

                                                            },
                                                            error: function (data) {
                                                                data = data.responseJSON
                                                                for (var key in data) {
                                                                    var input = $('input[name="' + key + '"]').get(0);
                                                                    input.setCustomValidity(data[key]);
                                                                    $('form#login-nav').find('button[type="submit"]').click();
                                                                }
                                                            }
                                                        })
                                                            return false;
                                                        }
                                                    });
                                                    $('form#login-nav').find('input[type="password"], input[type="email"]').on('change', function () {
                                                        this.setCustomValidity('');
                                                    });
                                                });
                                              </script>
                <div class="AsideMainArea" id="AsmainArea">
                    <div id="EventLogs" class="LogEvent"></div>
                    <div class="input-group" style="display:inline-flex;position:relative">
                        <input class="NA-Form-Control" id="searchLogEvent" style="display:flex;flex-flow:row nowrap;height:30.22px;"
                            placeholder="Search Actions" type="text">
                        <div class="input-group-btn" style="padding-bottom:0;display:flex;flex-flow:row nowrap;width:auto;">
                            <button style="height:30.22px;" class="btn btn-default" type="submit" id="btnSearchLogEvent"><i
                                    class="fa fa-search-minus" aria-hidden="true"></i></button>
                            </div>
                            </div>
                            </div>

        </aside>
        <div class="clearfloat"></div>

        <!--=========DIALOG ENTRY FOR INPUT OPEN AND UPDATE DATA===============-->
        {% if request.resolver_match.url_name != 'home' %}
        <script>
			NA.Privilege.Email = '{{ request.user.email }}';
			var roleCode = '{{ request.user.role }}';
			if (roleCode == 1) {
				NA.Privilege.IsAdmin = true;
				NA.Privilege.RoleName = 'Super User';
			} else {
				if (roleCode == 2) {
					NA.Privilege.RoleName = 'User';
				} else if (roleCode == 3) {
					NA.Privilege.RoleName = 'Guest';
				}
				NA.Privilege.IsAdmin = false;
			}
			NA.Privilege.password = '{{ request.user.password }}'
        </script>
        {% endif %}
        {% block DialogEntry %}

        {% endblock %}

        <!--====================================================================-->
    </div>
    <script>window.jQuery || document.write('<script src="../../static/app/scripts/jquery-1.11.1.js"><\/script>')</script>
    <script src="{% static 'app/scripts/material.spinner.min.js' %}"></script>
    {% with request.resolver_match.url_name as url_name %}
    {% if url_name == 'home' or url_name == 'login' %}
    <script>window.NA || document.write('<script src="../../static/app/scripts/NAJS.js"><\/script>')</script>
    <!-- ========================== This is Load only in Home, =============================== -->
    <script type="text/javascript">
    	NA.common.loadStyles("../../../static/app/content/jquery-ui.min.css","jqueryUI");
    	NA.common.loadStyles("../../../static/app/content/ui.jqgrid.css","UIJqueryGrid");
    	NA.common.loadStyles("../../../static/app/content/Dialog.css", "DialogEntryStyle");//Load Style buat dialog sebelum di pakai
    	//NA.common.loadStyles("../../../static/app/content/NA_commonEntry.css","CommonEntry");//Load Style buat form sebelum di pakai

        var btnRegister = NA.common.doc.querySelector('button#register')
        if (btnRegister){
            NA.common.dialog.initDialog(null,'Nufarm User - Register',[btnRegister]);//inistialisasi menu
    	    window.showDialogEntry = function(event){
    		$('div.maindialogContent').load(url_register(), function (response, status, xhr) {
    			var dialog = document.querySelector("div.containerDialog");
    			dialog.style.top = '20px';
    			function getData_User() {
    				data = {
    					first_name: $('input#id_first_name').val(),
    					last_name: $('input#id_last_name').val(),
    					username: $('form#form_user').find('input#id_username').val(),
    					picture: $('input#id_picture').val(),
    					email: $('form#form_user').find('input#id_email').val(),
    					password1: $('form#form_user').find('input#id_password1').val(),
    					password2: $('form#form_user').find('input#id_password2').val()
    				}
    				return data
    			}
    			var initializeForm_user = NA.common.getElementID('id_initializeForm_user');
    			initializeForm_user.Value = JSON.stringify(getData_User());
    			function NA_UserSubmit() {
    				var send_data = getData_User();
    				if(send_data['picture'] != ""){
    					send_data['picture'] = $('input#id_picture')[0].files[0];
    				};

    				send_data['csrfmiddlewaretoken'] = $('form#form_user input[name="csrfmiddlewaretoken"]').val();
    				user_form_data = new FormData()
    				for ( var key in send_data ) {
    					user_form_data.append(key, send_data[key]);
    				}
    				$.ajax({
    					url: $('form#form_user').attr('action'),
    					method: 'POST',
    					data: user_form_data,
    					cache: false,
    					contentType: false,
    					processData: false,
    					success: function (data) {
    						window.location.href = '/'
    					}
    				});
    			};
    			var form_user = NA.common.getElementID('form_user');
    			var dialog_user = NA.common.dialog.doc.querySelector("div.containerDialog");
    			var btn_input = NA.common.getElementID('user_submit');
    			$('div.dialogButtonOKCancel>a.button').click(function (event) {
    				var target = NA.NAEvent.getTarget(event);
    				UserHandler(target.innerText);
    			});
    			$('button.ui-button.ui-dialog-titlebar-close').on('click', function (event) {
    				UserHandler('Close');
    			});
    			function UserHandler(TextElement){
    				var dialog = document.querySelector("div.containerDialog"),
                    originalData = JSON.parse(initializeForm_user.Value);
    				valuesForm = getData_User();
    				switch (TextElement) {
    					case 'OK': {
    						var password = document.querySelector('input#id_password1');
    						var confirm_password = document.querySelector('input#id_password2');
    						if (password.value != confirm_password.value) {
    							confirm_password.setCustomValidity('confirm password didn\'t match with password');
    						} else {
    							confirm_password.setCustomValidity('');
    						}
    						if (!form_user.checkValidity()) {
    							btn_input.click();
    						}else {
    							if (NA.common.detectInputChanges(originalData, valuesForm)) {
    								NA_UserSubmit();
    							} else {
    								NA.common.dialog.closeDialog(dialog);
    							}
    						}
    						break;
    					}
    					case 'Cancel':
    					case 'Close': {
    						if (NA.common.detectInputChanges(originalData, valuesForm)) {
    							return dialogConfirm(NA.common.message.dataHasChanged, NA.common.message.titleInfo,
                                    function () {
                                    	if (!form_user.checkValidity()) {
                                    		//NA.NAEvent.preventDefault(event);
                                    		btn_input.click();
                                    	}
                                    	else {
                                    		NA_UserSubmit();
                                    	}
                                    },
                                    function () {
                                    	NA.common.dialog.closeDialog(dialog);
                                    });
    						} else {
    							NA.common.dialog.closeDialog(dialog);
    						}
    					}
    				}
    			}
    		});
    	}
    }
    </script>
    {%endif%}
    {%endwith%}
    <!--======================================== Script Log Event =============================================== -->

    <!--<link rel="stylesheet" type="text/css" href="{% static 'app/content/backupss/icon.css' %}">-->
    <script type="text/javascript" src="{% static 'app/scripts/JsTree/jstree.min.js' %}"></script>
    <!--<script src="{% static 'app/scripts/NAJS.js' %}"></script>-->
    <script type="text/javascript">
        $(document).ready(function () {
            $('p#change_user_picture').on({
                'click': function(event){
                    NA.NAEvent.preventDefault(event);
                    NA.NAEvent.stopPropagation(event);
                    $('input#user_picture').click();
                }
            });
            $('input#user_picture').on('change',function(event){
                var value = this.value
                if (value.match(/jpe?g|png/) != null) {
                    if (value.match(/fakepath/) != null) {
                        value = value.replace(/C\:\\fakepath\\/, '')
                        this.is_correct = true;
                    };
                    if ($('p#not_correct_file').length > 0) {
                        $('p#not_correct_file').remove();
                    };
                } else {
                    if ($('p#not_correct_file').length == 0) {
                        this.is_correct = false;
                        $(this).parents('li').next().next().append('<p id="not_correct_file" style="width:100%;color:red;">Please Insert Correct File!!</p>');
                    };
                    return false;
                }

                if (this.is_correct) {
                    var formData = new FormData();
                    var file = this.files[0];
                    formData.append("picture", file);

                    $.ajax({
                        url: '/MasterData/Privilege/change_picture/'
                            + window.encodeURIComponent(NA.Privilege.Email) + '/',
                        method: 'POST',
                        data: formData,
                        cache: false,
                        contentType: false,
                        processData: false,
                        beforeSend: function(xhr){
                            xhr.setRequestHeader('X-CSRFToken', NA.CookieUtil.get('csrftoken'))
                        },
                        success: function (data) {
                            $('div.profile-circle.medium, div.profile-circle.shadow')
                                .css('background-image', 'url(/static/NA_User_Image/UploadImg/' + data['message']);
                        }
                    })
                }
            });
            $('button#btn_sign_out').click(function(event){
                window.location.href = '/logout/'
            });
            var inputLogEvent = NA.common.getElementID('searchLogEvent'),
                btn_search_log = NA.common.getElementID('btnSearchLogEvent'),
                win = win||window;
            function searchLog(event){
                NA.NAEvent.preventDefault(event);
                var targetValue = inputLogEvent.value;
                NA.common.AJAX.GET(url_logEvent() + '?' + win.encodeURIComponent('_Search') + '=' + true + '&' + win.encodeURIComponent('search') + '=' + targetValue, 'application/json', function (e) { window.document.body.style.cursor = 'wait'; },
					  null,
					  function (e) {//function executed after data has been returned by server(XHR.onload)
					      var data = JSON.parse(this.responseText);
					      if (data) {
                              //$('#EventLogs').tree('loadData',data);
                              $('#EventLogs').jstree(true).settings.core.data = data;
                              $('#EventLogs').jstree(true).refresh();
					      }
					  }, null, function (e) {
					      throw new Error(this.responseText + '\nStatus code :' + this.statusText);
					  }, function (e) { window.document.body.style.cursor = 'default'; },//function ajax complete
					  null);
            };
            NA.NAEvent.addHandler(inputLogEvent,'keydown',function(event){
                if(event.keyCode == 13){
                    searchLog(event);
                }
            });
            NA.NAEvent.addHandler(btn_search_log,'click',function(event){
                searchLog(event);
            });

            //Removes jstree cached state from localStorage
            localStorage.removeItem('jstree');
            $('#EventLogs').on('changed.jstree', function (e, data) {
                if (data.action == "select_node"){
                    if (data.node.original.type == "event") {
                        $.ajax({
                            type: 'GET',
                            url: url_logDesc() + '?idapp=' + data.node.original.id,
                            dataType: 'json',
                            success: function (data) {
                                BootstrapDialog.show({
                                    draggable: true,
                                    type: BootstrapDialog.TYPE_SUCCESS,
                                    size: BootstrapDialog.SIZE_SMALL,
                                    title: 'Your Log Activity Data<i class="fa fa-history" style="margin-left: 10px;"></i>',
                                    message: (function(){
                                        var container = $('<div class="container" style="padding:0;"></div>');
                                        var table = $('<table class="table table-hover logevent"></table>');
                                        var text_title = 'You have ' + data.activity_type + ' this data at ' + data.created_date;
                                        var table_title = '<th colspan="2" class="title-logevent">' + text_title + '</th>';
                                        table.append($('<thead><tr class="active">' + table_title + '</tr></thead>'));
                                        var tbody = $('<tbody></tbody>');
                                        for (var key in data.data){
                                            var tr = $('<tr></tr>');
                                            var label = $('<td class="col-xs-4" style="font-weight:bold;">' + key + '</td>');
                                            var value = $('<td class="col-xs-8">: ' + data.data[key] + '</td>');
                                            tr.append(label);
                                            tr.append(value);
                                            tbody.append(tr);
                                        }
                                        table.append(tbody);
                                        container.append(table);
                                        return container;
                                    })(),
                                    closable: false,
                                    animate: true,
                                    closeByBackdrop: false,
                                    closeByKeyboard: false,
                                    buttons: [{
                                        label: 'OK',
                                        cssClass: 'btn-default',
                                        action: function (dialogRef) {
                                            dialogRef.close();
                                        }
                                    }]
                                })
                            }
                        })
                    }
                }
            }).jstree({
                'core': {
                    'data': {
                        'url': function (node) {
                            return url_logEvent();
                        },
                        'data': function (node) {
                            return {
                                'id': node.id,
                                'data_type': node.original ? node.original.type : node.type
                            };
                        }
                    }
                },
                "types": {
                    "#": {
                        "valid_children": ["root"]
                    },
                    "root": {
                        "icon": "glyphicon glyphicon-calendar",
                        "valid_children": ["year"]
                    },
                    "year": {
                        //"icon" : "glyphicon glyphicon-chevron-right",
                        "valid_children": ["month", "date"]
                    },
                    "month": {
                        //"icon": "glyphicon glyphicon-menu-right",
                        "valid_children": ["date", "event"]
                    },
                    "event": {
                        "icon":"glyphicon glyphicon-envelope",
                        "valid_children": []
                    }
                },
                "plugins": [
                    "search", "state", "types", "wholerow"
                ]
            });
        });
    </script>
    <!--===========================End Script Log Event =============================================== -->
    <!--====================Jquery untuk menu============================ -->
    <script type="text/javascript">
    	$(function () {
        var options = {
                    absolutePaths: false, attributes: true, noMeta:true,
                    computedStyle: false, cull: true, htmlOnly: false,deep:true, metadata: false, serialProperties: false
                };
            NA.SaveStatedSidebar = function () {

                var savedStated = JSON.stringify(domJSON.toJSON($('#sidebarresult').get(0),options));
                localStorage.removeItem('sss');
                localStorage.setItem('sss',savedStated);
                //localStorage.set("")
            }
            NA.RestoreStatedSidebar = function () {
                var oriStatedSidebar = JSON.parse(localStorage.getItem('sss'));
                if (oriStatedSidebar) {
                    //drop child node
                    var sideBar = NA.common.getElementID('sidebarresult');
                  //  while (sideBar.firstChild) {
                  //      sideBar.firstChild.remove();
                 //   }
                    //load sidebar
                    var DOMDocumentFragment = domJSON.toDOM(oriStatedSidebar,options);
                    sideBar.parentNode.replaceChild(DOMDocumentFragment,sideBar);
                    //$('#sidebarresult').html(renderjson.set_show_to_level(0)(oriStatedSidebar));
                    //reattach event
                    //cek Active menu
                     var activeMenu = localStorage.getItem("ActiveMenu");
                     $('div.sidebar ul li a:contains(\"' + activeMenu + '\")').filter(function(index){
                         return $(this).text() === activeMenu;
                         }).addClass('active');;
                     //$('div.sidebar ul li a:contains(\"' + activeMenu + '\"\)').addClass('active');
                    NA.ProvideEventSideBar();
                }
            }
            NA.ProvideEventSideBar = function () {
                $('.dropdown.prevent-close').on({
                    "click": function (event) {
                        if ($(event.target).closest('.dropdown-toggle').length) {
                            $(this).data('closable', true);
                        } else {
                            $(this).data('closable', false);
                        }
                    },
                    "hide.bs.dropdown": function (event) {
                        hide = $(this).data('closable');
                        $(this).data('closable', !$(this).hasClass('keep-open'));
                        return hide;
                    }
                });
                $("div.sidebar ul li a").click(function (event) {
                    if ($(this).find($(".fa")).hasClass('fa-angle-down')) {
                        $(this).find($(".fa")).removeClass('fa-angle-down');
                        $(this).find($(".pull-right")).addClass('fa-angle-up');
                    }
                    else if ($(this).find($(".fa")).hasClass('fa-angle-up')) {
                        $(this).find($(".fa")).removeClass('fa-angle-up');
                        $(this).find($(".pull-right")).addClass('fa-angle-down');
                    }
                    else if ($(this).find($(".fa")).hasClass('fa-angle-left')) {
                        $(this).find($(".fa")).removeClass('fa-angle-left');
                        $(this).find($(".pull-right")).addClass('fa-angle-right');
                        $('div.sidebar').css('flex', '0 1 auto');
                        $('div.sidebar').toggleClass('fliph');
                    }
                    else if ($(this).find($(".fa")).hasClass('fa-angle-right')) {
                        $(this).find($(".fa")).removeClass('fa-angle-right');
                        $(this).find($(".pull-right")).addClass('fa-angle-left');
                        $('.sidebar').css('flex', '0 0 173px');
                        $('.sidebar').toggleClass('fliph');
                    }
                    if($(this).attr('href') !== '' && $(this).attr('href') !== '#'){
                        var SavedActivedMenu = localStorage.getItem('ActiveMenu');
                        if (SavedActivedMenu){
                            //localStorage.removeItem($(this).text());
                           // $(this).removeClass('active');
                            $('div.sidebar ul li a:contains(\"' + SavedActivedMenu + '\")').filter(function(index){
                         return $(this).text() === SavedActivedMenu;
                         }).removeClass('active');
                        }
                        localStorage.setItem('ActiveMenu',$(this).text());
                        NA.SaveStatedSidebar();
                    }
                });
            };
            NA.ProvideEventSideBar();
            //JavaScript Anchor

    		// ====== common ajax setup if user was logged out
    		$.ajaxSetup({
    			error: function(resp){
    				if (resp.status == 401){
    					NA_Bootstrap.dialog.dialogAlert(
                            NA.common.message.unAuthorized,
                            NA.common.message.titleInfo,
                            function(){
                            	window.location.href = NA.client.url.login_next
                            }
                        )
    				} else {
    					var message;
    					try {
    						response = JSON.parse(resp.responseText);
    						if (typeof response.message != "undefined") {
    							message = response.message
    						} else {
    							message = response
    						}
    					} catch (e) {
    						if (e instanceof SyntaxError) {
    							message = resp.responseText;
    						} else {
    							console.log(e);
    						}
    					}
    					if (typeof resp.responseJSON != 'undefined'){
    						if (typeof resp['message'] != 'undefined'){
    							message = resp['message']
    						}
    					}
    					NA_Bootstrap.dialog.dialogAlert(
                            NA.common.message.server(message),
                            NA.common.message.titleInfo
                        )
    				}
    			}
    		});

    		$.expr[':'].icontains = function(a, i, m) {
    			return $(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
    		};
    		var extend_tax_menu = document.getElementById('extend_tax_menu');
    		NA.common.dialog.initDialog(null, 'Nufarm extend taxes - Transaction', [extend_tax_menu]);

    		function BuildExtendGrid(q) {
    			var url = '/Transactions/GA_History/?q='
    			if (arguments.length > 0) {
    				$('table#extend_tax').setGridParam({ url: url + q }).trigger("reloadGrid");
    			} else {
    				$('table#extend_tax').jqGrid({
    					url: url,
    					datatype: 'json',
    					mtype: 'GET',
    					colNames: ['idapp', 'No', 'Goods Name', 'Brand', 'Type', 'Colour',
                                   'Invoice No', 'Reg Number', 'Is Expire', 'Expire Date', 'Employee Name',
                                   'Mobile Phone', 'In active'],
    					colModel: [
                            {
                            	name: 'idapp', index: 'idapp', width: 65, search: false, editable: false, hidden: true, key: true
                            },
                            {
                            	name: 'no', index: 'no', width: 45 ,align:'center'
                            },
                            {
                            	name: 'goods_name', index: 'goods_name', width: 130, editable: false, search: false, sortable: true
                            },
                            {
                            	name: 'brand', index: 'brand', width: 150, editable: false, editrules: { required: true }, sortable: true
                            },
                            {
                            	name: 'type', index: 'type', width: 100, align: 'left', editable: false, search: false
                            },
                            {
                            	name: 'colour', index: 'colour', width: 130, align: 'left', editable: true
                            },
                            {
                            	name: 'invoice_no', index: 'gender', width: 100, align: 'left', editable: true, search: false
                            },
                            { name: 'reg_number', index: 'reg_number', width: 150, editable: true, search: false },
                            {
                            	name: 'is_expire', index: 'is_expire', width: 80, align: 'center', search: false, formatter: 'checkbox',
                            	edittype: 'checkbox', editoptions: { value: 'true:false' }
                            },
                            {
                            	name: 'expire_date', index: 'expire_date', width: 150, editable: false, search: false, formatter: 'date',
                            	formatoptions: {
                            		srcformat: 'Y-m-d', newformat: 'd F Y'
                            	}
                            },
                            { name: 'employee_name', index: 'employee_name', width: 120, editable: true, editrules: { required: true } },
                            { name: 'mobile_phone', index: 'mobile_phone', width: 120, editable: false, search: false },
                            {
                            	name: 'inactive', index: 'inactive', width: 80, align: 'center', search: false, formatter: 'checkbox',
                            	edittype: 'checkbox', editoptions: { value: 'true:false' }
                            },
    					],
    					jsonreader: {
    						repeatitems: false,
    						id: 'idapp',
    						root: 'rows'
    					},
    					pager: $('div#extend_tax_pager'),
    					rowList: [20, 50, 100, 200, 300, 500],
    					rowNum: 20,
    					loadui: 'disable', // Disable Loading Text
    					cellEdit: false,
    					sortname: 'idapp',
    					sortorder: "desc",
    					viewrecords: true,
    					iconSet: "fontAwesome",
    					hidegrid: true,
    					shrinkToFit: false,
    					shrinkToFit: false,
    					height: 350,
    					width: 650,
    					prmNames: {
    						oper: 'oper', addoper: 'add', editoper: 'edit', deloper: 'del', id: 'idapp'
    					},

    					loadError: function(jqXHR, textStatus, errorThrown){
    						if (jqXHR.status == 401 || errorThrown == 'Unauthorized'){
    							NA_Bootstrap.dialog.dialogAlert(
                                    NA.common.message.unAuthorized,
                                    NA.common.message.titleInfo,
                                    function(){
                                    	window.location.href = NA.client.url.login_next
                                    }
                                )
    						}
    					},
    					ondblClickRow: function (rowId) {
    						var ok_btn = $('div.maindialogContent').next().find('div.dialogButtonOKCancel')
                                .children().first();
    						ok_btn.click();
    					}
    				});
    			}
    		}

    		window.ShowDialogExtend = function(data){
    			BootstrapDialog.show({
    				draggable: true,
    				type: BootstrapDialog.TYPE_WARNING,
    				size: BootstrapDialog.SIZE_SMALL,
    				cssClass: 'dialog-extend-tax',
    				title: 'Nufarm - Extend tax number',
    				closable: false,
    				animate: true,
    				closeByBackdrop: false,
    				closeByKeyboard: false,
    				message: (function(){
    					return $(data)
    				}),
    				onshown: function(){
    					$('#id_new_date_reg').datepicker({
    						dateFormat: 'dd/mm/yy',
    						changeMonth: true,
    						changeYear: true,
    						dayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri ', 'Sat'],
    						beforeShowDay: $.datepicker.noWeekends,
    						maxDate: 1,
    						showButtonPanel: true,
    						closeText: "Close",
    						currentText: 'Now',
    						onSelect: function (dateText) {
    							var date = $.datepicker.parseDate('dd/mm/yy', dateText);

    							var expire_date = document.querySelector('#id_new_expired_reg');
    							expire_date.value = date.getDate() + (date.getMonth() > 9 ? '/' : '/0')
                                + (date.getMonth() + 1) + '/' + (date.getFullYear() + 1);
    						}
    					});
    				},
    				buttons: [{
    					label: 'OK',
    					cssClass: 'btn-success',
    					action: function (dialogRef) {
    						var idapp = $('form#extend_ga_history').find('#id_idapp').val();
    						var date_reg = $('form#extend_ga_history').find('#id_new_date_reg').val();

    						$.ajax({
    							url: '/Transactions/GA_History/Extend/',
    							method: 'POST',
    							beforeSend: function(xhr){
    								xhr.setRequestHeader(
                                        'X-CSRFToken',
                                        $('form#extend_ga_history').find('input[name="csrfmiddlewaretoken"]').val()
                                    )
    							},
    							data: {
    								idapp: idapp,
    								new_date_reg: date_reg
    							},
    							success: function(){
    								dialogRef.close();
    							}
    						})
    					}
    				},
                    {
                    	label: 'Cancel',
                    	cssClass: 'btn-default',
                    	action: function (dialogRef) {
                    		dialogRef.close();
                    	}
                    }]
    			})
    		}
    		window.showOtherDialog = function(event){
    			if(event.target == extend_tax_menu){
    				var dialog = $('div.containerDialog')[0];
    				var dialog_content = $('div.maindialogContent');

    				var placeHolder = 'Enter goods descriptions to search for .. .';
    				var container_search_form = NA.common.dialog.createFormContainer('search_acc_fa', placeHolder,
                    function (e) {//event for blur
                    	if (this.value === '') {
                    		if (this.getAttribute('placeholder') === '') {
                    			this.setAttribute('placeholder', placeHolder);
                    		}
                    	}
                    },
                    function (e) {//event for focus
                    	if (this.value === '') {
                    		if (this.getAttribute('placeholder') === placeHolder) {
                    			this.setAttribute('placeholder', '');
                    		}
                    	}
                    },
                    function (e) {//even for keydown txtSearch
                    	if (e.keyCode === 13) {
                    		NA.NAEvent.preventDefault(e);
                    		window.document.body.style.cursor = 'wait';
                    		//cari data ke database
                    		BuildExtendGrid(e.target.value.trim());
                    		window.document.body.style.cursor = 'default';
                    		NA.NAEvent.stopPropagation(e);
                    	}
                    }, function (e) {
                    	txtSearch = NA.common.getElementID('txtsearch_fk_goods');
                    	NA.common.triggerKeyboardEvent(txtSearch, 13);
                    });
    				dialog_content[0].appendChild(container_search_form);

    				var container_grid = $('<div style="margin-top:10px;"></div>');

    				container_grid.append($('<table id="extend_tax"></table>'));
    				container_grid.append($('<div id="extend_tax_pager"></div>'));
    				dialog_content.append(container_grid);
    				BuildExtendGrid();
    				if (typeof $.datepicker == "undefined"){
    					$('<script src="/static/app/scripts/jquery-ui.js"><\/script>')
                            .appendTo($('body'));
    				}
    				var close_btn = $('#extend_tax').parents('div.maindialogContent')
                        .prev().find('button');
    				close_btn.click(function(event){
    					event.preventDefault();
    					NA.common.dialog.closeDialog(dialog);
    				});
    				var ok_btn = dialog_content.next().find('div.dialogButtonOKCancel')
                    .children().first();
    				var cancel_btn = ok_btn.next();
    				cancel_btn.click(function(event){
    					event.preventDefault();
    					NA.common.dialog.closeDialog(dialog);
    				});

    				ok_btn.click(function(event){
    					event.preventDefault();
    					event.stopPropagation();
    					event.stopImmediatePropagation();
    					var idapp = $('#extend_tax').getGridParam('selrow');
    					$.ajax({
    						url: '/Transactions/GA_History/Extend/',
    						data: {
    							idapp: idapp
    						},
    						success: function(data){
    							window.ShowDialogExtend(data);
    						}
    					})
    				})
    			}

    		}
    		$('p#edit_profile').click(function (event) {
    			event.preventDefault();
    			event.stopPropagation();
    			$.ajax({
    				url: '/MasterData/Privilege/edit_profile/',
    				success: function (response) {
    					BootstrapDialog.show({
    						draggable: true,
    						type: BootstrapDialog.TYPE_SUCCESS,
    						size: BootstrapDialog.SIZE_NORMAL,
    						title: 'Profile',
    						message: (function(){
    							return $(response);
    						})(),
    						closable: false,
    						animate: true,
    						closeByBackdrop: false,
    						closeByKeyboard: false,
    						buttons: [
                                {
                                	label: 'OK',
                                	cssClass: 'btn-default',
                                	action: function (dialogRef) {
                                		$(dialogRef.$modalBody).find('input[type="submit"]').click();
                                	}
                                },
                                {
                                	label: 'Cancel',
                                	cssClass: 'btn-default',
                                	action: function (dialogRef) {
                                		dialogRef.close();
                                	}
                                }
    						]
    					})
    				}
    			})

    		});
    	});
    </script>
    <script type="text/javascript">if (typeof $.fn.modal == 'undefined') { NA.common.doc.write('\<script src\=\"\.\.\/\.\.\/\.\.\/static\/app\/scripts\/bootstrap\.js\"\>\<\/script\>'); }</script>
    <link rel="stylesheet" type="text/css" href="{% static 'app/content/font-awesome.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'app/scripts/JsTree/themes/default/style.min.css' %}" />
    {% if request.session.ga_reg_notif %}
    <script type="text/javascript">
    	$(document).ready(function(){
    		$.ajax({
    			url: '/Notifications/',
    			method: 'GET',
    			data: {
    				name: 'ga_reg_notif',
    				type: 'popup'
    			},
    			success: function(data){
    				if (data.length){
    					BootstrapDialog.show({
    						draggable: true,
    						type: BootstrapDialog.TYPE_WARNING,
    						size: BootstrapDialog.SIZE_SMALL,
    						cssClass: 'ga-popup-notif',
    						title: 'Notifications - Please extend taxes below !',
    						message: (function(){
    							var row = $('<div></div>');
    							var container = $('<div class="container" style="padding:0;"></div>');
    							var is_expire = false;
    							data.forEach(function(obj, index){
    								if (obj.is_expire && !is_expire){
    									is_expire = true;
    								}
    							})
    							if (is_expire){
    								var text_title = 'Below are taxes that will be or has been expired :';
    							} else {
    								var text_title = 'Below are taxes that will be expired :';
    							}

    							var table_title = '<div id="notif_popup_title" style="font-size: 16px;font-weight: bold;margin-bottom: 10px;">' + text_title + '</div>';
    							row.append(table_title);

    							var table = $('<table id="table-notif-popup" class="table table-hover"></table>');

    							var thead = $('<thead></thead>');
    							var tr_thead = $('<tr class="active"></tr>');
    							tr_thead.append($('<th><input type="checkbox" id="check_all" /></th>'));
    							['No', 'Reg Number', 'Expire Date', 'Days Left', 'Employee', 'Phone Number'].forEach(function(obj, index){
    								tr_thead.append(
                                    $('<th>'+ obj +'</th>')
                                )
    							})
    							thead.append(tr_thead);
    							table.append(thead);
    							var tbody = $('<tbody></tbody>');

    							data.forEach(function(obj, index){

    								var tr = $('<tr id="'+ obj.notif_id +'"></tr>');
    								if (obj.notif_type == 'warning'){
    									tr = $('<tr id="'+ obj.notif_id +'" class="warning"></tr>');
    								} else if (obj.notif_type == 'danger'){
    									tr = $('<tr id="'+ obj.notif_id +'" class="danger"></tr>');
    								}
    								tr.append($('<td><input type="checkbox" /></td>'));
    								tr.append($('<td>' + obj.no + '</td>'));
    								tr.append($('<td>' + obj.reg_number + '</td>'));
    								tr.append($('<td>' + obj.date_expire + '</td>'));
    								tr.append($('<td>' + obj.day_left + '</td>'));
    								tr.append($('<td>' + obj.employee_name + '</td>'));
    								tr.append($('<td>' + obj.employee_phone + '</td>'))
    								tbody.append(tr);
    							})
    							table.append(tbody);
    							container.append(table);
    							row.append(container)
    							return row
    						}),
    						closable: false,
    						animate: true,
    						closeByBackdrop: false,
    						closeByKeyboard: false,
    						buttons: [{
    							'id': 'dismiss_popup',
    							label: 'Dismiss',
    							cssClass: 'btn-default',
    							action: function (dialogRef) {
    								var checkbox_checked = $('#table-notif-popup tbody input[type="checkbox"]').filter(function(index){
    									return this.checked;
    								});
    								var data = [];
    								checkbox_checked.each(function(index, elem){
    									data.push(
                                            $(elem).parents('tr').attr('id')
                                        )
    								});
    								$.ajax({
    									url: '/Notifications/dismiss/',
    									method: 'POST',
    									data: {
    										notif_id: String(data)
    									},
    									beforeSend: function(xhr){
    										xhr.setRequestHeader('X-CSRFToken', NA.CookieUtil.get('csrftoken'))
    									},
    									success: function(){
    										dialogRef.close();
    									}
    								})
    							}
    						},
                            {
                            	label: 'Snooze',
                            	cssClass: 'btn-default',
                            	action: function(dialogRef){
                            		dialogRef.close();
                            	}
                            }],
    						onshow: function(dialog){
    							dialog.getButton('dismiss_popup').disable();
    						},
    						onshown: function(dialog){
    							$(document).on('click', '#table-notif-popup input#check_all', function(event){
    								if(this.checked){
    									$('#table-notif-popup input[type="checkbox"]').each(function(index, elem){
    										elem.checked = true;
    										dialog.getButton('dismiss_popup').enable();
    									})
    								} else {
    									$('#table-notif-popup input[type="checkbox"]').each(function(index, elem){
    										elem.checked = false;
    										dialog.getButton('dismiss_popup').disable();
    									})
    								}
    							});

    							var total_checkbox = $('#table-notif-popup tbody input[type="checkbox"]').length;

    							$(document).on('click', '#table-notif-popup tbody input[type="checkbox"]', function(event){
    								var checkbox_checked = $('#table-notif-popup tbody input[type="checkbox"]').filter(function(index){
    									return this.checked;
    								});
    								if (this.checked){
    									dialog.getButton('dismiss_popup').enable();
    									if (checkbox_checked.length == total_checkbox){
    										document.querySelector('#table-notif-popup input#check_all').checked = true;
    									}
    								} else {
    									dialog.getButton('dismiss_popup').disable();
    									document.querySelector('#table-notif-popup input#check_all').checked = false;
    								}
    							});

    							$(document).on('click', 'table#table-notif-popup tbody tr', function(event){
    								var checkbox = $(this).children().first().children();
    								checkbox.click();
    							})
    						}
    					})
    				}
    			}
    		})

    		$.ajax({
    			url: '/Notifications/',
    			method: 'GET',
    			data: {
    				name: 'ga_reg_notif',
    				type: 'count'
    			},
    			success: function(data){
    				if(data.count > 0){
    					$('span#notification-count').text(data.count);
    					$('#notification-content').children().remove();
    				}
    			}
    		})

    		$(document).on("shown.bs.dropdown", ".dropdown.notifications", function () {
    			$(this).find('.profile-circle').css('background', 'rgba(0,0,0,.85)');
    			var notif_content = $('#notification-content');

    			if(notif_content[0].dataset.pull == "false"){
    				var container_spinner = $('<div class="container-spinner"></div>');
    				notif_content.append(container_spinner);
    				$.ajax({
    					url: '/Notifications/',
    					method: 'GET',
    					data: {
    						name: 'ga_reg_notif'
    					},

    					beforeSend: function(){
    						container_spinner.spinner({
    							color: 'forestgreen',
    							strokeWidth: 4,
    							radius: 20
    						})
    					},

    					success: function(data){
    						if(data.length){
    							notif_content.children().remove();
    							for(var i=0; i < data.length; i++){
    								var notif_item = $('<li class="notification-item"></li>');
    								var container = $('<div></div>');
    								var notif_title = $('<p class="notification-title">' + data[i].title + '</p>');
    								var notif_message = $('<p class="notification-message">' + data[i].message + '</p>');
    								var extend_tax = $('<div id="extend_button" data-regid="'+ data[i].reg_id +'">EXTEND</div>');
    								var cancel = $('<div id="cancel_button">CANCEL</div>');

    								notif_item.append(extend_tax);
    								notif_item.append(cancel);
    								container.append(notif_title);
    								container.append(notif_message);
    								notif_item.append(container);
    								notif_content.append(notif_item);
    							}
    						}
    						notif_content[0].dataset.pull = true;
    					},
    					complete: function(){
    						container_spinner.remove();
    					}
    				})
    			}

    		}).on("hidden.bs.dropdown", ".dropdown.notifications", function(){
    			$(this).find('.profile-circle').css('background', '');
    			$('li.notification-item').css('background', '');
    			$('li.notification-item').find('#extend_button, #cancel_button').css('display', '');
    			$('li.notification-item').find('p').css('color', '');
    		})

    		$(document).on('click', 'li.notification-item', function(event){
    			event.preventDefault();
    			event.stopPropagation();
    			if ($(this).find('#extend_button').css('display') == 'block'){ // if extend button was displayed
    				$('li.notification-item').css('background', '');
    				$('li.notification-item').find('#extend_button, #cancel_button').css('display', '');
    				$(this).find('p').css('color', '');
    			} else {
    				$('li.notification-item').css('background', '');
    				$('li.notification-item').find('#extend_button, #cancel_button').css('display', '');
    				$('li.notification-item').find('p').css('color', '');
    				$(this).css('background', 'rgba(117,117,117,.9)');
    				$(this).find('#extend_button, #cancel_button').css('display', 'block');
    				$(this).find('p').css('color', '#666');
    			}
    		});

    		$(document).on('click', '#extend_button', function(event){
    			event.preventDefault();
    			event.stopPropagation();
    			event.stopImmediatePropagation();
    			if (typeof $.datepicker == "undefined"){
    				$('<script src="/static/app/scripts/jquery-ui.js"><\/script>')
                        .appendTo($('body'));
    			}
    			$.ajax({
    				url: '/Transactions/GA_History/Extend/',
    				data: {
    					idapp: this.dataset.regid
    				},
    				success: function(data){
    					window.ShowDialogExtend(data);
    				}
    			})
    		});
    	})
    </script>
    {% endif %}
    <script type="text/javascript">
        $(function(){
            if (window.$.jgrid){//check apakah ada datagrid
            NA.RestoreStatedSidebar();
            }
        });
    </script>

</body>

</html>
